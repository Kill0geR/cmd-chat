<div align="center">

# ğŸ¤ CMD-CHAT

### encrypted terminal chat. no servers. no logs. ram only.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)

</div>

---

peer-to-peer encrypted chat that runs in your terminal. you host, you control. close the window â€” everything's gone.

## why

every "secure" messenger still stores metadata somewhere. this doesn't. it's just two terminals talking over an encrypted tunnel. nothing written to disk, ever.

## how it works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SRP AUTHENTICATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  CLIENT                                         SERVER           â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â• TCP CONNECT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚â”€â”€â”€ {"cmd":"srp_init","username","A"} â”€â”€â”€â”€â”€â”€â–º â”‚              â”‚
â”‚    â”‚         (A = client public ephemeral)        â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚â—„â”€â”€â”€â”€ {"user_id","B","salt","room_salt"} â”€â”€â”€â”€ â”‚              â”‚
â”‚    â”‚         (B = server public ephemeral)        â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚  [client derives room_key via HKDF:          â”‚              â”‚
â”‚    â”‚   room_key = HKDF(password, room_salt)]      â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚â”€â”€â”€ {"cmd":"srp_verify","user_id","M"} â”€â”€â”€â”€â”€â–º â”‚              â”‚
â”‚    â”‚         (M = client proof)                   â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€ {"H_AMK","session_key"} â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚              â”‚
â”‚    â”‚         (H_AMK = server proof)               â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚  [password never transmitted]                â”‚              â”‚
â”‚    â”‚  [MITM can't derive session key]             â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 E2E ENCRYPTED CHAT (same socket)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚â—„â”€â”€â”€â”€â”€â”€â”€ {"type":"init","messages","users"} â”€ â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚  â”Œâ”€â”´â”€â”                                        â”Œâ”€â”€â”´â”€â”€â”            â”‚
â”‚  â”‚ C â”‚â”€ {"type":"message","text":encrypted} â”€â–ºâ”‚  S  â”‚            â”‚
â”‚  â”‚ L â”‚                                        â”‚  E  â”‚            â”‚
â”‚  â”‚ I â”‚â—„â”€â”€ {"type":"message","data":{...}} â”€â”€â”€â”€â”‚  R  â”‚            â”‚
â”‚  â”‚ E â”‚                                        â”‚  V  â”‚            â”‚
â”‚  â”‚ N â”‚â—„â”€â”€ {"type":"user_joined",...} â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  E  â”‚            â”‚
â”‚  â”‚ T â”‚                                        â”‚  R  â”‚            â”‚
â”‚  â”‚   â”‚â—„â”€â”€ {"type":"user_left",...} â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     â”‚            â”‚
â”‚  â””â”€â”¬â”€â”˜                                        â””â”€â”€â”¬â”€â”€â”˜            â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚  [server stores ONLY ciphertext]             â”‚              â”‚
â”‚    â”‚  [server CANNOT read messages]               â”‚              â”‚
â”‚    â”‚  [all clients with same password             â”‚              â”‚
â”‚    â”‚   derive identical room_key]                 â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚  Encryption: Fernet (AES-128-CBC + HMAC)     â”‚              â”‚
â”‚    â”‚  Key derivation: HKDF-SHA256                 â”‚              â”‚
â”‚    â”‚  Protocol: newline-delimited JSON over TCP   â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â”‚    â”‚  [on disconnect: keys wiped from RAM]        â”‚              â”‚
â”‚    â”‚                                              â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KEY HIERARCHY                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  password â”€â”€â”¬â”€â”€â–º SRP â”€â”€â–º session_key (per-user, auth only)       â”‚
â”‚             â”‚                                                    â”‚
â”‚             â””â”€â”€â–º HKDF(password, room_salt) â”€â”€â–º room_key (shared) â”‚
â”‚                                                                  â”‚
â”‚  room_salt: generated once at server start                       â”‚
â”‚  room_key:  deterministic, same for all clients with same pwd    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SRP (Secure Remote Password)** â€” password is never sent over the network. both sides prove they know it via zero-knowledge proof, then derive identical session keys.

## install

```bash
git clone https://github.com/emilycodestar/cmd-chat.git
cd cmd-chat
python -m venv venv && source venv/bin/activate && pip install -r requirements.txt
```

windows:

```bash
python -m venv venv ; .\venv\Scripts\activate ; pip install -r requirements.txt
```

## usage

start server:

```bash
python cmd_chat.py serve 0.0.0.0 3000 --password mysecret
```

connect:

```bash
python cmd_chat.py connect SERVER_IP 3000 username mysecret
```

![Example](example.gif)

## features

- **ram only** â€” nothing touches disk
- **pure sockets** â€” no http, no websocket, just raw tcp
- **srp auth** â€” password never sent over network
- **e2e encryption** â€” Fernet (AES-128-CBC + HMAC)
- **zero dependencies on web frameworks** â€” only asyncio

## license

MIT
